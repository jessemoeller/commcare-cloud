{#
EDIT THIS FILE
This is the file to edit, not postgresql.autogen.tf.

The comment below appears at the top of postgresql.autogen.tf.
-#}
// DO NOT EDIT THIS FILE
// This file is autogenerated, terraform 0.12
// which will introduce "count" on module calls

{% with count = 5 -%}
locals {
  rds_instances = [
    {%- for i in range(count) %}
    "${merge(local.default_rds, var.rds_instances[{{ i }} < length(var.rds_instances) ? {{ i }} : 0])}",
    {%- endfor %}
  ]
}

{% for i in range(count) %}
module "postgresql-{{ i }}" {
  source = "../postgresql"
  rds_instance = "${local.rds_instances[{{ i }}]}"
  subnet_ids = "${local.rds_subnet_ids}"
  vpc_security_group_ids = "${local.rds_vpc_security_group_ids}"
  create = "${ {{ i }} < length(var.rds_instances) ? 1 : 0 }"
}
{%- endfor %}
{%- endwith %}
